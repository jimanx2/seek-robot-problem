task default: %w[cli]

namespace :cli do
    cmd_args = (ARGV[2..-1].nil? ? [] : ARGV[2..-1]).join(' ')

    debug_flag = "-d" if !cmd_args.index("-d") && !ENV['DEBUG'].nil? && ENV['DEBUG'] == "true"

    task :repl do
        ruby "main.rb -r #{debug_flag} #{cmd_args}", verbose: debug_flag == "-d"
    end

    task :"non-interactive" do
        ruby "main.rb #{debug_flag} #{cmd_args}", verbose: debug_flag == "-d"
    end
end